/* 
 * Editor Styles
 * Fixes styling issues in the WordPress block editor for all post types
 * Ensures proper text contrast and title sizing
 */

/* Root variables are loaded separately via functions.php */

/* Ensure proper text contrast in the editor */
.edit-post-visual-editor,
.block-editor-writing-flow,
.wp-block-post-content {
    background-color: var(--background-color) !important;
    color: var(--text-color) !important;
}

/* Fix title styling in editor - comprehensive targeting */
.edit-post-visual-editor .wp-block-post-title,
.edit-post-visual-editor .editor-post-title__input,
.editor-post-title__input,
.wp-block-post-title,
.wp-block[data-type="core/post-title"],
.wp-block[data-type="core/post-title"] .wp-block-post-title,
.block-editor-block-list__layout .wp-block[data-type="core/post-title"] {
    font-family: var(--font-family-heading) !important;
    font-size: var(--font-size-3xl) !important;
    line-height: 1.4 !important;
    color: var(--text-color) !important;
    background: transparent !important;
    font-weight: 700 !important;
    margin: var(--spacing-lg) 0 !important;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    max-width: 100% !important;
    width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    box-sizing: border-box !important;
}

/* Title wrapper: constrain like content blocks */
.editor-styles-wrapper .editor-visual-editor__post-title-wrapper,
.editor-styles-wrapper .edit-post-visual-editor__post-title-wrapper {
    max-width: var(--content-width) !important;
    width: 100% !important;
    box-sizing: border-box !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: var(--spacing-lg) !important;
    padding-right: var(--spacing-lg) !important;
}

/* Force the title input to not be positioned absolutely or fixed */
.editor-post-title__input,
.edit-post-visual-editor .editor-post-title__input {
    text-align: left !important;
    position: static !important;
    left: auto !important;
    right: auto !important;
    transform: none !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}



/* Fix heading sizes in editor to match theme */
.edit-post-visual-editor .wp-block h1,
.wp-block h1 { font-size: var(--font-size-3xl) !important; line-height: 1.4 !important; }

.edit-post-visual-editor .wp-block h2,
.wp-block h2 { font-size: var(--font-size-2xl) !important; line-height: 1.4 !important; }



.edit-post-visual-editor .wp-block h3,
.wp-block h3 { font-size: var(--font-size-xl) !important; line-height: 1.4 !important; }

.edit-post-visual-editor .wp-block h4,
.wp-block h4 { font-size: var(--font-size-lg) !important; line-height: 1.4 !important; }

.edit-post-visual-editor .wp-block h5,
.wp-block h5 { font-size: var(--font-size-body) !important; line-height: 1.4 !important; }

.edit-post-visual-editor .wp-block h6,
.wp-block h6 { font-size: var(--font-size-base) !important; line-height: 1.4 !important; }

/* All headings should use the theme font */
.edit-post-visual-editor .wp-block h1,
.edit-post-visual-editor .wp-block h2,
.edit-post-visual-editor .wp-block h3,
.edit-post-visual-editor .wp-block h4,
.edit-post-visual-editor .wp-block h5,
.edit-post-visual-editor .wp-block h6,
.wp-block h1,
.wp-block h2,
.wp-block h3,
.wp-block h4,
.wp-block h5,
.wp-block h6 {
    font-family: var(--font-family-heading) !important;
    color: var(--text-color) !important;
    font-weight: 700 !important;
    margin: var(--spacing-lg) 0 !important;
}

/* Ensure proper background and text contrast for the main editor */
.block-editor-writing-flow,
.edit-post-visual-editor__content-area,
.block-editor-block-list__layout,
.wp-block-post-content {
    background-color: var(--background-color) !important;
    color: var(--text-color) !important;
}

/* Fix any potential dark mode issues */
@media (prefers-color-scheme: dark) {
    .edit-post-visual-editor,
    .block-editor-writing-flow,
    .wp-block-post-content {
        background-color: var(--background-color) !important;
        color: var(--text-color) !important;
    }

    .edit-post-visual-editor .wp-block-post-title,
    .edit-post-visual-editor .editor-post-title__input,
    .editor-post-title__input,
    .wp-block-post-title {
        color: var(--text-color) !important;
        background: transparent !important;
    }


    .block-editor-writing-flow,
    .edit-post-visual-editor__content-area,
    .block-editor-block-list__layout,
    .wp-block-post-content {
        background-color: var(--background-color) !important;
        color: var(--text-color) !important;
    }
}



/* General paragraph and content styling */
.edit-post-visual-editor .wp-block-paragraph,
.wp-block-paragraph {
    font-size: var(--font-size-body) !important;
    line-height: 1.9 !important;
    color: var(--text-color) !important;
    font-family: var(--font-family-body) !important;
}

/* Ensure links are visible */
.edit-post-visual-editor .wp-block a,
.edit-post-visual-editor a,
.wp-block a {
    color: var(--link-color) !important;
}

/* Fix any transparent backgrounds that might cause issues */
.edit-post-visual-editor .wp-block[data-type],
.wp-block[data-type] {
    background: transparent !important;
}

/* Ensure block editor interface elements don't interfere */
.block-editor-block-list__layout .wp-block {
    background: transparent !important;
}

/* Fix any input field styling issues in the editor */
.edit-post-visual-editor .form-field input,
.edit-post-visual-editor .form-field textarea,
.edit-post-visual-editor input,
.edit-post-visual-editor textarea {
    background-color: var(--background-color) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--border-color) !important;
    padding: var(--spacing-sm) !important;
    border-radius: var(--border-radius-sm) !important;
}

/* Additional specificity for dark mode form fields */
@media (prefers-color-scheme: dark) {
    .edit-post-visual-editor .form-field input,
    .edit-post-visual-editor .form-field textarea,
    .edit-post-visual-editor input,
    .edit-post-visual-editor textarea {
        background-color: var(--background-color) !important;
        color: var(--text-color) !important;
        border: 1px solid var(--border-color) !important;
    }
}



/* Fill editor background and defer width to inner layout */
.editor-styles-wrapper {
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: var(--spacing-xl) 0 var(--spacing-lg) 0;
    background-color: var(--background-color);
    box-sizing: border-box;
}

/* Content width constraint - apply to individual blocks like WordPress 6.3+ iframed editor */
.editor-styles-wrapper .is-root-container > .wp-block {
    max-width: var(--content-width) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: var(--spacing-lg) !important;
    padding-right: var(--spacing-lg) !important;
    box-sizing: border-box !important;
}



/* Additional aggressive targeting for the title input */
body .editor-post-title__input,
body .wp-block-post-title,
body .edit-post-visual-editor .editor-post-title__input {
    position: static !important;
    left: auto !important;
    right: auto !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    transform: none !important;
    width: 100% !important;
} 

/* === List Styles (restore bullets/numbers removed by global reset in style.css) === */
/* Target WordPress list blocks directly with padding-inline-start for proper marker alignment */
.editor-styles-wrapper .wp-block-list {
    list-style-position: outside !important;
    padding-inline-start: var(--spacing-xl) !important;
    margin-bottom: var(--spacing-lg) !important;
}

.editor-styles-wrapper ul.wp-block-list {
    list-style-type: disc !important;
}

.editor-styles-wrapper ol.wp-block-list {
    list-style-type: decimal !important;
}

/* Nested lists: indent slightly but not compound excessively */
.editor-styles-wrapper .wp-block-list .wp-block-list {
    padding-inline-start: var(--spacing-lg) !important;
    margin-top: var(--spacing-sm) !important;
    margin-bottom: var(--spacing-sm) !important;
}

/* List item spacing consistent with frontend */
.editor-styles-wrapper li {
    line-height: inherit !important;
    font-size: inherit !important;
    margin: var(--spacing-sm) 0 !important;
}

/* Avoid interfering with navigation or special block list styles (e.g., menus) */
.editor-styles-wrapper .wp-block-navigation ul,
.editor-styles-wrapper .wp-block-navigation ol,
.editor-styles-wrapper .wp-block-navigation li {
    list-style: none !important;
    margin: 0 !important;
}

/* Tighten task list (core/list with checkboxes) alignment */
.editor-styles-wrapper .wp-block-list .wp-block-list-item {
    display: list-item; /* Ensure proper marker rendering even if editor injects flex */
}

/* Ensure list marker color inherits (especially in dark mode) */
.editor-styles-wrapper ul li::marker,
.editor-styles-wrapper ol li::marker {
    color: var(--text-color);
}
